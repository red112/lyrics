<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê´‘ë³µì ˆ ë³´ì‹ ê° íƒ€ì¢…í–‰ì‚¬ - í•¨ê»˜í•œëŒ€í•©ì°½ë‹¨</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 600px;
            box-sizing: border-box;
        }

        #titleImage {
            width: 30%;
            height: auto;
            display: block;
            margin-bottom: 10px;
        }
        
        #scoreHistory {
            text-align: center;
            color: #555;
            background-color: #ecf0f1;
            padding: 8px;
            border-radius: 4px;
            margin-bottom: 20px;
            font-size: 0.8em;
            font-weight: bold;
        }

        #lyricsContainer {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #eee;
            border-radius: 4px;
            background-color: #f9f9f9;
            text-align: left;
            line-height: 2;
        }

        #lyricsContainer p {
            margin-bottom: 10px;
        }
        
        #lyricsContainer input[type="text"] {
            width: 80px;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin: 0 2px;
            font-size: 0.9em;
        }

        .word-span {
            margin: 0 2px;
        }

        button {
            display: block;
            width: 100%;
            padding: 10px 15px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #2980b9;
        }

        #resetButton {
            background-color: #95a5a6;
        }
        #resetButton:hover {
            background-color: #7f8c8d;
        }

        .correct {
            color: blue;
            font-weight: bold;
        }

        .incorrect {
            color: red;
            font-weight: bold;
        }
        
        .user-attempt {
             /* ì‚¬ìš©ì ì…ë ¥ í…ìŠ¤íŠ¸ì— ëŒ€í•œ ê¸°ë³¸ ìŠ¤íƒ€ì¼ (ì±„ì  í›„) */
        }

        .correct-answer-hint {
            font-size: 0.8em;
            color: #555;
            margin-left: 5px;
        }

        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            .container {
                padding: 15px;
            }
            #lyricsContainer input[type="text"] {
                width: 70px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <img id="titleImage" height="10px" src="hd-logo.svg" alt="í•¨ê»˜í•œëŒ€í•©ì°½ë‹¨">
        
        <div id="scoreHistory"></div>
        
        
        <div id="lyricsContainer">
            </div>
        
        <button id="checkButton">ì±„ì í•˜ê¸°</button>
        <button id="resetButton" style="display:none;">ë‹¤ì‹œ ì—°ìŠµí•˜ê¸°</button>
        
    </div>
    <a href="./naga.html">ë…ë¦½êµ°ê°€ ì™¸ìš°ê¸°</a>
    <a href="./gum.html">ì¥ê²€ê°€ ì™¸ìš°ê¸°</a>
    <a href="./indep.html">ê´‘ë³µì ˆë…¸ë˜ ì™¸ìš°ê¸°</a>
    <a href="./nara.html">ì•„ë¦„ë‹¤ìš´ë‚˜ë¼ ì™¸ìš°ê¸°</a>
    <a href="./seoul.html">ì„œìš¸ì˜ì°¬ê°€ ì™¸ìš°ê¸°</a>
    <script>
        // --- ğŸµ ì„¤ì • ğŸµ ---
        // ë…¸ë˜ë³„ ì ìˆ˜ ì €ì¥ì„ ìœ„í•œ ê³ ìœ  ID (ë‹¤ë¥¸ ë…¸ë˜ë¥¼ ì¶”ê°€í•  ë•Œ ì´ ê°’ì„ ë°”ê¿”ì£¼ì„¸ìš”)
        const songId = "sid006_all"; 
        
        // í™”ë©´ì— í‘œì‹œí•  ìµœê·¼ ì ìˆ˜ ê°œìˆ˜
        const count_current_score = 5;

        const songTitle = "ì „ê³¡ê°€ì‚¬";
        // â— `!`ê°€ ë¶™ì€ ë‹¨ì–´ëŠ” ë¬¸ì œë¡œ ì¶œì œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
        const songLyrics = `!<ë…ë¦½êµ°ê°€-2ì ˆ>
ì›ìˆ˜ë“¤ì´ ê°•í•˜ë‹¤ê³  ê²ì„ ë‚¼ê±´ê°€ 
ìš°ë¦¬ë“¤ì´ ì•½í•˜ë‹¤ê³  ë‚™ì‹¬í• ê±´ê°€
ì •ì˜ì˜ ë‚ ì„¼ ì¹¼ì´ ë¹„ë¼ëŠ” ê³³ì— 
ì´ê¸¸ ì´ ë„ˆì™€ ë‚˜ë¡œë‹¤        

!<ë…ë¦½êµ°ê°€-4ì ˆ>
ì••ë¡ê°•ê³¼ ë‘ë§Œê°•ì„ ë›°ì–´ ê±´ë„ˆë¼ 
ì•…ë…í•œ ì›ìˆ˜ë¬´ë¦¬ ì“¸ì–´ëª°ì•„ë¼
ìƒì—ˆë˜ ì¡°êµ­ ê°•ì‚° íšŒë³µí•˜ëŠ” ë‚ 
ë§Œì„¸ë¥¼ ë¶ˆëŸ¬ë³´ì„¸

!<ë…ë¦½êµ°ê°€-í›„ë ´>
ë‚˜ê°€ ë‚˜ê°€ ì‹¸ìš°ë ¤ ë‚˜ê°€
ë‚˜ê°€ ë‚˜ê°€ ì‹¸ìš°ë ¤ ë‚˜ê°€
ë…ë¦½ë¬¸ì˜ ììœ ì¢…ì´ ìš¸ë¦´ ë•Œê¹Œì§€
ì‹¸ìš°ëŸ¬ ë‚˜ê°€ì„¸
!----------------
!<ì¥ê²€ê°€-3ì ˆ>
ìš°ë¦¬ì˜ ì¹¼ì´ í•œë²ˆ ë¹›ë‚˜ëŠ” ê³³ì—
ì•…ë§ˆì˜ ì—¬ëŸ¬ ë¨¸ë¦¬ ì¶”í’ë‚™ì—½
í•œì‚°ë„ì˜ ì™œì ì„ ê²©íŒŒí•˜ë˜
ì¶©ë¬´ê³µì˜ ê·¸ ì¹¼ì´ ì™„ì—°í•˜ê³ ë‚˜

!<ì¥ê²€ê°€-í›„ë ´>
ë²ˆì©ë²ˆì© ë²ˆê°œê°™ì´ ë²ˆì©
ë²ˆì©ë²ˆì© ë²ˆê°œê°™ì´ ë²ˆì©
ë‚ ëœ ì¹¼ì´ ìš°ë¦¬ ì†ì— ë¹›ì„ ë‚´ì–´
ë…ë¦½ì˜ ìœ„ë ¥ì„ ë–¨ì¹˜ëŠ”ê³ ë‚˜
!----------------
!<ê´‘ë³µì ˆë…¸ë˜-1ì ˆ>
í™ ë‹¤ì‹œ ë§Œì ¸ë³´ì ë°”ë‹·ë¬¼ë„ ì¶¤ì„ ì¶˜ë‹¤
ê¸°ì–´ì´ ë³´ì‹œë ¤ë˜ ì–´ë¥¸ë‹˜ ë²—ë‹˜ ì–´ì°Œí•˜ë¦¬
ì´ë‚ ì´ ì‚¬ì‹­ë…„ ëœ¨ê±°ìš´ í”¼ ì—‰ê¸´ ìì·¨ë‹ˆ
ê¸¸ì´ ê¸¸ì´ ì§€í‚¤ì„¸ ê¸¸ì´ ê¸¸ì´ ì§€í‚¤ì„¸

!<ê´‘ë³µì ˆë…¸ë˜-2ì ˆ>
ê¿ˆì—”ë“¤ ìŠì„ê±´ê°€ ì§€ë‚œ ì¼ì„ ìŠì„ê±´ê°€
ë‹¤ê°™ì´ ë³µì„ ì‹¬ì–´ ì˜ ê°€ê¿” ê¸¸ëŸ¬ í•˜ëŠ˜ ë‹¿ê²Œ
ì„¸ê³„ì— ë³´ëŒë  ê±°ë£©í•œ ë¹› ì˜ˆì„œ ë‚˜ë¦¬ë‹ˆ
í˜ì¨ í˜ì¨ ë‚˜ê°€ì„¸ í˜ì¨ í˜ì¨ ë‚˜ê°€ì„¸
!----------------
!<ì•„ë¦„ë‹¤ìš´ë‚˜ë¼-2ì ˆ>
ê°• ë¬¼ë¹›ì†Œë¦¬ ì‚° ë‚™ì—½ì†Œë¦¬
ì²œì§€ì‚¬ë°©ì´ ê³ ìš°ë‹ˆ ì¦ê²ì§€ ì•Šì€ê°€
ë°”ëŒ ê½ƒì†Œë¦¬ ë“¤í’€ ì –ëŠ” ì†Œë¦¬
ì•„í”ˆ ì²­ì¶˜ë„ ê³ ìš°ë‹ˆ ë§˜ ì¦ê²ì§€ ì•Šì€ê°€
ì°¸ ì•„ë¦„ë‹¤ìš´ ë§ì€ ê¿ˆì´ìˆëŠ”
ì´ ë•…ì— íƒœì–´ë‚˜ì„œ í–‰ë³µí•œ ë‚´ê°€ ì•„ë‹ˆëƒ
í° ë°”ë‹¤ìˆê³  í‘¸ë¥¸ í•˜ëŠ˜ê°€ì§„
ì´ ë•… ìœ„ì— ì‚¬ëŠ” ë‚˜ëŠ” í–‰ë³µí•œ ì‚¬ëŒ ì•„ë‹ˆëƒ
!<ì•„ë¦„ë‹¤ìš´ë‚˜ë¼-í”¼ë‚ ë ˆ>
!ìš°-- !ì•„-- ë§ì€ ê¿ˆì´ìˆëŠ” 
ì´ ë•…ì— íƒœì–´ë‚˜ì„œ í–‰ë³µí•œ ë‚´ê°€ ì•„ë‹ˆëƒ
í° ë°”ë‹¤ìˆê³  í‘¸ë¥¸ í•˜ëŠ˜ê°€ì§„
ì´ ë•… ìœ„ì— ì‚¬ëŠ” ë‚˜ëŠ” í–‰ë³µí•œ ì‚¬ëŒ ì•„ë‹ˆëƒ
ì•„ë¦„ë‹¤ìš´ ë‚˜ë¼
!----------------
!<ì„œìš¸ì˜ì°¬ê°€-1ì ˆ>
ì¢…ì´ ìš¸ë¦¬ë„¤ ê½ƒì´ í”¼ë„¤
ìƒˆë“¤ì˜ ë…¸ë˜ ì›ƒëŠ” ê·¸ ì–¼êµ´
ê·¸ë¦¬ì›Œë¼ ë‚´ ì‚¬ë‘ì•„
ë‚´ ê³ì„ ë– ë‚˜ì§€ë§ˆì˜¤
ì²˜ìŒ ë§Œë‚˜ê³  ì‚¬ë‘ì„ ë§ºì€
ì •ë‹¤ìš´ ê±°ë¦¬ ë§ˆìŒì˜ ê±°ë¦¬
ì•„ë¦„ë‹¤ìš´ ì„œìš¸ì—ì„œ
ì„œìš¸ì—ì„œ ì‚´ìœ¼ë µë‹ˆë‹¤

!<ì„œìš¸ì˜ì°¬ê°€-2ì ˆ>
ë´„ì´ ë˜ ì˜¤ê³  ì—¬ë¦„ì´ ê°€ê³ 
ë‚™ì—½ì€ ì§€ê³  ëˆˆ ë³´ë¼ ì³ë„
ë³€í•¨ì—†ëŠ” ë‚´ ì‚¬ë‘ì•„
ë‚´ ê³ì„ ë– ë‚˜ì§€ë§ˆì˜¤
í—¤ì–´ì ¸ ë©€ë¦¬ìˆë‹¤ í•˜ì—¬ë„
ë‚´ í’ˆì— ëŒì•„ì˜¤ë¼ ê·¸ëŒ€ì—¬
ì•„ë¦„ë‹¤ìš´ ì„œìš¸ì—ì„œ
ì„œìš¸ì—ì„œ ì‚´ìœ¼ë µë‹ˆë‹¤`;

        const blankProbability = 0.3; 
        
        // --- ì„¤ì • ë ---

        const lyricsContainer = document.getElementById('lyricsContainer');
        const checkButton = document.getElementById('checkButton');
        const resetButton = document.getElementById('resetButton');
        
        const scoreHistoryDiv = document.getElementById('scoreHistory');

        function displayScores() {
            const storageKey = `lyricScores_${songId}`;
            const scores = JSON.parse(localStorage.getItem(storageKey)) || [];
            
            if (scores.length > 0) {
                scoreHistoryDiv.textContent = `ìµœê·¼ ${count_current_score}íšŒ ì ìˆ˜: ${scores.join('ì , ')}ì  ğŸ¥‡`;
            } else {
                scoreHistoryDiv.textContent = 'ì•„ì§ ê¸°ë¡ëœ ì ìˆ˜ê°€ ì—†ìŠµë‹ˆë‹¤.';
            }
        }

        function initializeGame() {
            lyricsContainer.innerHTML = ''; 
            
            const lines = songLyrics.trim().split('\n');
            
            lines.forEach(lineText => {
                const lineDiv = document.createElement('p');
                const words = lineText.trim().split(/\s+/);

                words.forEach(word => {
                    if (!word) return;

                    // â— ìˆ˜ì •ëœ ë¶€ë¶„: ë‹¨ì–´ê°€ '!'ë¡œ ì‹œì‘í•˜ëŠ”ì§€ í™•ì¸
                    if (word.startsWith('!')) {
                        // '!'ë¡œ ì‹œì‘í•˜ë©´, '!'ë¥¼ ì œê±°í•˜ê³  í•­ìƒ í…ìŠ¤íŠ¸ë¡œ í‘œì‹œ
                        const span = document.createElement('span');
                        span.textContent = word.substring(1); // '!' ì œì™¸í•œ ë‚˜ë¨¸ì§€ ë¬¸ìì—´
                        span.className = 'word-span';
                        lineDiv.appendChild(span);
                    } else {
                        // '!'ê°€ ì—†ëŠ” ë‹¨ì–´ëŠ” ê¸°ì¡´ í™•ë¥ ì— ë”°ë¼ ë¹ˆì¹¸ ë˜ëŠ” í…ìŠ¤íŠ¸ë¡œ ì²˜ë¦¬
                        if (Math.random() < blankProbability) {
                            const input = document.createElement('input');
                            input.type = 'text';
                            input.dataset.originalWord = word; 
                            input.setAttribute('aria-label', 'ê°€ì‚¬ ë¹ˆì¹¸');
                            lineDiv.appendChild(input);
                        } else {
                            const span = document.createElement('span');
                            span.textContent = word;
                            span.className = 'word-span';
                            lineDiv.appendChild(span);
                        }
                    }
                    lineDiv.appendChild(document.createTextNode(' ')); 
                });
                lyricsContainer.appendChild(lineDiv);
            });

            checkButton.style.display = 'block';
            resetButton.style.display = 'none';
        }

        function checkAnswers() {
            const inputs = lyricsContainer.querySelectorAll('input[type="text"]');
            let correctCount = 0;
            const totalBlanks = inputs.length;

            if (totalBlanks === 0) {
                alert("ì±„ì í•  ë¹ˆì¹¸ì´ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œì‘í•´ì£¼ì„¸ìš”.");
                checkButton.style.display = 'none';
                resetButton.style.display = 'block';
                return;
            }

            inputs.forEach(input => {
                const userValue = input.value.trim();
                const originalWord = input.dataset.originalWord;
                
                const resultSpan = document.createElement('span');
                const userAnswerSpan = document.createElement('span');
                userAnswerSpan.textContent = userValue || "[ì…ë ¥ì•ˆí•¨]";
                userAnswerSpan.className = 'user-attempt';

                if (userValue.toLowerCase() === originalWord.toLowerCase()) {
                    correctCount++;
                    userAnswerSpan.classList.add('correct');
                    resultSpan.appendChild(userAnswerSpan);
                } else {
                    userAnswerSpan.classList.add('incorrect');
                    resultSpan.appendChild(userAnswerSpan);
                    
                    const hintSpan = document.createElement('span');
                    hintSpan.className = 'correct-answer-hint';
                    hintSpan.textContent = `(ì •ë‹µ: ${originalWord})`;
                    resultSpan.appendChild(hintSpan);
                }
                
                input.parentNode.replaceChild(resultSpan, input);
            });
            
            const score = Math.round((correctCount / totalBlanks) * 100);
            
            const storageKey = `lyricScores_${songId}`;
            const scores = JSON.parse(localStorage.getItem(storageKey)) || [];
            scores.unshift(score);
            const recentScores = scores.slice(0, count_current_score); 
            localStorage.setItem(storageKey, JSON.stringify(recentScores));

            displayScores();

            checkButton.style.display = 'none';
            resetButton.style.display = 'block';
        }

        checkButton.addEventListener('click', checkAnswers);
        resetButton.addEventListener('click', initializeGame);

        displayScores();
        initializeGame();
    </script>
</body>
</html>